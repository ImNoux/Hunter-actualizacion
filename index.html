<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunidad ARC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="header-top">
            <div class="menu-container">
                <button class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
                <div id="menuDropdown" class="menu-dropdown">
                    <a id="menuLogin" href="#" onclick="openModal('loginModal')">ðŸ”‘ Iniciar SesiÃ³n</a>
                    <a id="menuLogout" href="#" onclick="logoutSystem()" style="display: none; color: #ff4d4d;">ðŸšª Cerrar SesiÃ³n</a>
                    <a href="#" onclick="openModal('updatesModal')">Actualizaciones</a>
                    <a href="#" onclick="openModal('contactModal')">Contactos</a>
                </div>
            </div>
            <h1 onclick="changeSection('Home')">COMUNIDAD ARC</h1>
            <div style="width: 40px;"></div> </div>
    </header>

    <div id="searchContainer" style="display:none; padding: 10px 20px;">
        <input type="text" id="searchInput" placeholder="Buscar usuarios, posts, etiquetas...">
    </div>

    <main>
        <div class="thread-container">
            <p id="noThreadsMessage">Cargando...</p>
        </div>
        <div id="pagination-container"></div>
    </main>

    <nav class="bottom-navbar">
        <div class="nav-item active" onclick="changeSection('Home')" id="nav-home">
            <i class="fas fa-home"></i>
        </div>
        <div class="nav-item" onclick="changeSection('Busqueda')" id="nav-search">
            <i class="fas fa-search"></i>
        </div>
        <div class="nav-item plus-btn-container" onclick="openModal('newThreadModalContent')">
            <div class="plus-btn"><i class="fas fa-plus"></i></div>
        </div>
        <div class="nav-item" onclick="changeSection('Activity')" id="nav-activity">
            <i class="far fa-heart"></i>
        </div>
        <div class="nav-item" onclick="openFullProfile()" id="nav-profile">
            <i class="far fa-user"></i>
        </div>
    </nav>

    <div class="modal-content" id="newThreadModalContent">
        <span class="close-button" onclick="closeModal('newThreadModalContent')">&times;</span>
        <h2 style="font-size: 1.3em; margin-bottom: 20px; text-align: center; color: #fff;">Crear PublicaciÃ³n</h2>
        <form id="newThreadForm">
            <input type="hidden" id="sectionInput" name="section" value="Publicaciones">
            <div class="form-group">
                <label>CategorÃ­a:</label>
                <select id="categorySelect" required>
                    <option value="" disabled selected>-- Selecciona --</option>
                    <option value="Hunter">Hunter</option>
                    <option value="Creator">Creator</option>
                    <option value="Elite">Elite</option>
                    <option value="Top Model">Top Model</option>
                    <option value="Mentor">Mentor</option>
                    <option value="Cheerleader">Cheerleader</option>
                    <option value="Moon & Sun">Moon & Sun</option>
                    <option value="Publicaciones">General</option>
                </select>
            </div>
            <div class="form-group" style="display:none;">
                <input type="text" id="robloxUser" name="robloxUser">
            </div>
            <div class="form-group">
                <input type="text" id="title" placeholder="TÃ­tulo..." required autocomplete="off">
            </div>
            <div class="form-group">
                <textarea id="description" placeholder="Â¿QuÃ© estÃ¡s pensando?" required rows="4"></textarea>
            </div>
            <label for="imageFile" class="upload-btn-gray"><i class="fas fa-images"></i> Foto/Video</label>
            <input type="file" id="imageFile" accept="image/*, video/*" multiple style="display:none;">
            <p id="fileName" class="file-name-display"></p>
            <button type="submit" id="submitBtn" class="publish-btn">PUBLICAR</button>
        </form>
    </div>

    <div id="commentsModal" class="modal-overlay">
        <div class="comments-content">
            <span class="close-button" onclick="closeModal('commentsModal')">&times;</span>
            <h3>Comentarios</h3>
            <div id="commentsList"></div>
            <form id="commentForm">
                <input type="text" id="commentInput" placeholder="Escribe un comentario..." required autocomplete="off">
                <button type="submit"><i class="fas fa-paper-plane"></i></button>
            </form>
        </div>
    </div>

    <div class="modal-content" id="loginModal">
        <span class="close-button" onclick="closeModal('loginModal')">&times;</span>
        <h2 style="text-align:center;">Iniciar SesiÃ³n</h2>
        <div class="form-group"><input type="text" id="loginUser" placeholder="Usuario"></div>
        <div class="form-group"><input type="password" id="loginPin" placeholder="PIN"></div>
        <button onclick="loginSystem()" class="publish-btn">ENTRAR</button>
        <p style="text-align:center; margin-top:15px; font-size:0.9em;"><a href="#" onclick="closeModal('loginModal'); openModal('registerModal')" style="color:#00a2ff;">Crear cuenta</a></p>
    </div>

    <div class="modal-content" id="registerModal">
        <span class="close-button" onclick="closeModal('registerModal')">&times;</span>
        <h2 style="text-align:center;">Registro</h2>
        <div class="form-group"><input type="text" id="regUser" placeholder="Usuario nuevo"></div>
        <div class="form-group"><input type="text" id="regPin" placeholder="Crea un PIN (4 dÃ­gitos)" maxlength="4"></div>
        <button onclick="registerSystem()" class="publish-btn">REGISTRARSE</button>
    </div>

    <div class="modal-content" id="editProfileModal">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <span onclick="closeModal('editProfileModal')" style="cursor:pointer;">âœ•</span>
            <h3>Editar perfil</h3>
            <span onclick="saveProfileChanges()" id="saveProfileBtn" style="color:#00a2ff; cursor:pointer; font-weight:bold;">Listo</span>
        </div>
        <div style="text-align:center; margin-bottom:20px;">
            <img id="editAvatarPreview" src="" style="width:80px; height:80px; border-radius:50%;">
            <p onclick="document.getElementById('avatarUpload').click()" style="color:#00a2ff; font-size:0.9em; cursor:pointer; margin-top:5px;">Cambiar foto</p>
        </div>
        <div class="edit-group"><label>Nombre</label><input type="text" id="editNameInput"></div>
        <div class="edit-group"><label>Usuario</label><input type="text" id="editHandleInput"></div>
        <div class="edit-group"><label>Bio</label><textarea id="editBioInput"></textarea></div>
        <div class="edit-group"><label>Estado</label><input type="text" id="editStatusInput"></div>
    </div>

    <div id="toastContainer" class="toast-container"></div>
    
    <div id="confirmModal" class="modal-overlay" style="z-index: 5000;">
        <div class="info-content" style="max-width: 300px; padding: 20px;">
            <h3>Cerrar SesiÃ³n</h3>
            <p id="confirmText">Â¿Salir de la cuenta?</p>
            <div style="display:flex; justify-content:center; gap:10px;">
                <button onclick="closeModal('confirmModal')" style="background:#333; color:white; border:none; padding:8px 20px; border-radius:4px;">No</button>
                <button id="confirmActionBtn" style="background:#ff4d4d; color:white; border:none; padding:8px 20px; border-radius:4px;">SÃ­</button>
            </div>
        </div>
    </div>

    <input type="file" id="avatarUpload" accept="image/*" style="display:none;">
    <script type="module" src="script.js"></script>
    <script>
        function toggleMenu() { document.getElementById("menuDropdown").classList.toggle("show"); }
        window.closeModal = (id) => document.getElementById(id).style.display = 'none';
        window.openModal = (id) => { 
            document.getElementById("menuDropdown").classList.remove('show');
            document.getElementById(id).style.display = 'block'; 
        }
        document.getElementById('imageFile').onchange = function() {
            if(this.files && this.files.length > 0) {
                document.getElementById('fileName').textContent = `${this.files.length} archivos`;
            }
        };
        window.toggleMenu = toggleMenu;
    </script>
</body>
</html> 